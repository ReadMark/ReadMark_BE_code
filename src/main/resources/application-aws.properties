# AWS 배포용 설정

# 서버 포트 (AWS Elastic Beanstalk는 자동으로 포트를 설정)
server.port=${PORT:8080}

# 데이터베이스 설정 (H2 인메모리 - 무료 배포용)
spring.datasource.url=jdbc:h2:mem:readmark;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA 설정
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.sql.init.mode=always
spring.sql.init.data-locations=classpath:data.sql
spring.sql.init.continue-on-error=false
spring.jpa.defer-datasource-initialization=true

# H2 콘솔 비활성화 (보안상)
spring.h2.console.enabled=false

# 파일 업로드 설정
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# 로깅 설정 (AWS CloudWatch용)
logging.level.com.example.ReadMark=INFO
logging.level.org.springframework.web=WARN
logging.level.org.hibernate.SQL=WARN

# Google Vision API 설정 (환경변수로 설정)
# GOOGLE_APPLICATION_CREDENTIALS 환경변수 사용

# CORS 설정 (ESP32 접근 허용)
spring.web.cors.allowed-origins=*
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE
spring.web.cors.allowed-headers=*

# AWS 특화 설정
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
